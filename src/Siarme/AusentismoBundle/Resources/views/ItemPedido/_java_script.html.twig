<script>

$("table textarea").each(function () {
  this.setAttribute("style", "height:" + (this.scrollHeight + 20) + "px;overflow-y:hidden;");
}).on("input", function () {
  this.style.height = "auto";
  this.style.border = 0;
  this.style.background = "transparent";

  this.style.height = (this.scrollHeight + 20) + "px";
});
    $('textarea').on('keyup',function(){
      $chek= $(this).parent().find(".glyphicon-ok");
        //$chek.fadeOut("low");
        $chek.fadeIn("low");
        $chek.removeClass("text-success").addClass("text-muted");
    });

   $('textarea').on('change paste',function(){
        var $href= $(this).attr("data-href");
        var $val= $(this).val();
         $chek= $(this).parent().find(".glyphicon-ok");
        $.ajax({
            type: 'POST',
            url:  $href,
            data: { 'q':  $val },
            success: function(msg){
               $chek.removeClass("text-muted").addClass("text-success");
                setTimeout(function () {
                    $chek.fadeOut("low");
                    $(this).val($val);
                }, 500);
                if($('#actualizar-pagina').is(':hidden')){
                    $('#actualizar-pagina').removeClass("hidden");
                }
            }
        });

    });

$(".btn-nuevo-item").unbind('click').click( function(){
        var $href= $(this).attr("data-href");
        $.ajax({
             url: URL+$href,
             type: 'POST',
             success: function(response){
             var msj= document.getElementById("modal-body-nuevo-item");
             msj.innerHTML =response;
             $('#modal-nuevo-item').modal('show');
             $("#siarme_ausentismobundle_itempedido_precio").change(function() {
              let str = $(this).val();
              str = str.replace("$", "");
              str = str.replace(".", "");
              str = str.replace(".", "");
              str = str.replace(".", "");
              str = str.trim();
              $("#siarme_ausentismobundle_itempedido_precio").val(str);
            });

            $("#codigo1").select2({
                width:'100%',
                placeholder: 'Seleccione un Ã­tem',
                cache: true,
                ajax: {
                   url: "{{ path('item_pedido_search') }}",
                   dataType: 'json',            
                   delay: 500,
                   data: function (params) {
                      return {
                              q: params.term // search term
                             };
                   },
                   processResults: function (data) {
                     return {
                              results: $.map(data, function(obj) {
                                 return { id: obj.text, text: obj.text };
                              })
                            };
                   },
                },
            });
        $("#codigo1").on('change', function(){
            let strArray = ($(this).val()).split(" -- ");
          $("#siarme_ausentismobundle_itempedido_codigo").val(strArray[0]);
          $("#siarme_ausentismobundle_itempedido_codigo").attr("readonly", true);
          $("#siarme_ausentismobundle_itempedido_item").val(strArray[1]);
          $("#siarme_ausentismobundle_itempedido_item").attr("readonly", true);
          $("#siarme_ausentismobundle_itempedido_rubro").val(strArray[2]);
          $("#siarme_ausentismobundle_itempedido_rubro").attr("readonly", true);
         });
             } 
        }); 
    });

</script>